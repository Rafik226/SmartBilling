<section class="px-6 py-8">
  <div class="flex items-center justify-between mb-6">
    <h2 class="text-2xl font-bold text-blue-700">Utilisateurs</h2>
    <button (click)="create()" class="bg-blue-600 text-white px-4 py-2 rounded-lg font-semibold shadow hover:bg-blue-700 transition">Nouvel utilisateur</button>
  </div>
  <div class="mb-4 flex flex-col md:flex-row md:items-center md:justify-between gap-2">
    <input [(ngModel)]="search" type="text" placeholder="Rechercher par nom ou email..." class="w-full md:w-72 border border-blue-200 rounded-lg px-4 py-2 focus:outline-none focus:ring-2 focus:ring-blue-400 transition" />
  </div>
  <div class="overflow-x-auto bg-white rounded-xl shadow">
    <table class="min-w-full divide-y divide-gray-200">
      <thead class="bg-blue-50">
        <tr>
          <th class="px-4 py-3 text-left text-xs font-semibold text-blue-700 uppercase">Nom d'utilisateur</th>
          <th class="px-4 py-3 text-left text-xs font-semibold text-blue-700 uppercase">Email</th>
          <th class="px-4 py-3 text-left text-xs font-semibold text-blue-700 uppercase">Rôles</th>
          <th class="px-4 py-3 text-left text-xs font-semibold text-blue-700 uppercase">Statut</th>
          <th class="px-4 py-3"></th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let u of pagedUsers" class="border-b hover:bg-blue-50 transition-colors cursor-pointer">
          <td class="px-4 py-2 font-semibold text-blue-700">{{ u.username }}</td>
          <td class="px-4 py-2">{{ u.email }}</td>
          <td class="px-4 py-2">{{ u.roles.join(', ') }}</td>
          <td class="px-4 py-2">
            <span *ngIf="u.status === 'actif'" class="inline-block px-2 py-1 text-xs rounded bg-green-100 text-green-700">Actif</span>
            <span *ngIf="u.status === 'inactif'" class="inline-block px-2 py-1 text-xs rounded bg-gray-200 text-gray-700">Inactif</span>
          </td>
          <td class="px-4 py-2 text-right">
            <button (click)="$event.stopPropagation(); edit(u.id)" class="px-3 py-1 border border-blue-200 rounded-lg text-blue-700 hover:bg-blue-100 transition">Éditer</button>
            <button (click)="$event.stopPropagation(); view(u.id)" class="ml-2 px-3 py-1 border border-blue-200 rounded-lg text-blue-700 hover:bg-blue-100 transition">Détail</button>
            <button (click)="$event.stopPropagation(); delete(u.id)" class="ml-2 px-3 py-1 bg-red-50 text-red-700 rounded-lg hover:bg-red-100 transition">Suppr</button>
          </td>
        </tr>
      </tbody>
    </table>
  </div>
  <div class="flex justify-center items-center gap-2 mt-6" *ngIf="totalPages > 1">
    <button (click)="setPage(page-1)" [disabled]="page === 1" class="px-3 py-1 rounded border border-gray-300 bg-white hover:bg-gray-100 disabled:opacity-50">Précédent</button>
    <span class="font-semibold text-blue-700">Page {{ page }} / {{ totalPages }}</span>
    <button (click)="setPage(page+1)" [disabled]="page === totalPages" class="px-3 py-1 rounded border border-gray-300 bg-white hover:bg-gray-100 disabled:opacity-50">Suivant</button>
  </div>
</section>

